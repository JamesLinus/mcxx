# OpenMP + Nanos 
[omp-base]
options =
{debug} options = -g
{instrument,!debug} options = --variable=instrument:1
preprocessor_name = gcc
preprocessor_options = -E
{instrument,!debug,!openmpt,!nanox} preprocessor_options = -I@MINTAKA_INCLUDES@ -include mintaka.h
compiler_name = gcc
compiler_options = 
linker_name = gcc
{openmp} compiler_phase = libtlomp-core.so
# nanos4
{openmp,!openmpt,!nanox} preprocessor_options = -I@NANOS4_INCLUDES@ -D_OPENMP=200505 -include nth_mcc.h
{openmp,!openmpt,!nanox} linker_options = -L@NANOS4_LIBS@ -Wl,@RPATH_PARAMETER@,@NANOS4_LIBS@
{openmp,!openmpt,!nanox,!nanos-dev,!debug,!instrument} linker_options = -lnthreads-pfm 
{openmp,!openmpt,!nanox,nanos-dev,!debug,!instrument} linker_options = -lnthreads-dev 
{openmp,!openmpt,!nanox,instrument,!debug} linker_options = -lnthreads-prv -L @MINTAKA_LIBS@ -Wl,@RPATH_PARAMETER@,@MINTAKA_LIBS@ -lmintaka
{openmp,!openmpt,!nanox,debug} linker_options = -g -lnthreads-dbg
{openmp,!openmpt,!nanox} pragma_prefix = nanos
{openmp,!openmpt,!nanox} compiler_phase = libtlnanos4.so
{openmp,!openmpt,!nanox,instrument,!debug} @INSTRUMENTATION_PHASE@
{openmp,!openmpt,!nanox,serialize} compiler_phase = libtlomp-serialize.so
{openmp,!openmpt,!nanox,serialize} compiler_phase = libtlomp-core.so  # Rerun core after serialization
{openmp,!openmpt,!nanox} compiler_phase = libtlomp-nanos4.so
# nanos++
{openmp,nanox} preprocessor_options = -I@NANOX_INCLUDES@ -D_OPENMP=200805 -include nanos.h
{openmp,nanox} linker_options = -L@NANOX_LIBS@ -Wl,@RPATH_PARAMETER@,@NANOX_LIBS@
{openmp,openmpt,!nanox} preprocessor_options = -I@NANOX_INCLUDES@ -D_OPENMP=200805 -include nanos.h
{openmp,openmpt,!nanox} linker_options = -L@NANOX_LIBS@ -Wl,@RPATH_PARAMETER@,@NANOX_LIBS@
{openmp,nanox,!openmpt} linker_options = -lnanox-c -lnanox-omp
{openmp,openmpt} linker_options = -lnanox-c -lnanox-ss
{openmp,nanox} compiler_phase = libtlomp-fun-tasks.so 
{openmp,nanox,!only-fun-tasks} compiler_phase = libtlomp-core.so 
{openmp,nanox,!only-fun-tasks} compiler_phase = libtlomp-nanox.so
{openmp,nanox,!only-fun-tasks} compiler_phase = libtlnanox-smp.so
{openmp,nanox,!only-fun-tasks} compiler_phase = libtlnanox-smp_numa.so
{openmp,openmpt,!nanox} compiler_phase = libtlomp-fun-tasks.so 
{openmp,openmpt,!nanox,!only-fun-tasks} compiler_phase = libtlomp-core.so 
{openmp,openmpt,!nanox,!only-fun-tasks} compiler_phase = libtlomp-nanox.so
{openmp,openmpt,!nanox,!only-fun-tasks} compiler_phase = libtlnanox-smp.so
{openmp,openmpt,!nanox,!only-fun-tasks} compiler_phase = libtlnanox-smp_numa.so
{openmp,openmpt,!nanox,!only-fun-tasks} compiler_phase = libtlnanox-gpu.so

[mcc : omp-base]
language = C
options = -std=gnu99

[mcxx : omp-base]
language = C++
{openmp} preprocessor_options = -include new 
compiler_name = g++
linker_name = g++

[imcc : mcc]
preprocessor_name = icc
compiler_name = icc
linker_name = icc

[imcxx : mcxx]
preprocessor_name = icpc
compiler_name = icpc
linker_name = icpc

# Profile mode
[omp-prof-common]
{openmp} preprocessor_options = -D_OPENMP=200805
{openmp} compiler_phase = libtlomp-core.so
{openmp} compiler_phase = libtlomp-profile.so

[omp-profcc : omp-prof-common]
language = C
preprocessor_name = gcc
preprocessor_options = -E
compiler_name = gcc
compiler_options = -std=gnu99
linker_name = gcc
linker_options =

[omp-profcxx : omp-prof-common]
language = C++
preprocessor_name = g++
preprocessor_options = -E
compiler_name = g++
compiler_options =
linker_name = g++
linker_options =
